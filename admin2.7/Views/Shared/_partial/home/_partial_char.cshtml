
<div class="row">
    @if (ViewData["anCashThisMonth"] != null && ViewData["anCashThisMonth"] != null)
    {
        Dal.orderMng.CashAnalytic ca = (Dal.orderMng.CashAnalytic)ViewData["anCashThisMonth"];

        <script>
            var data1 = [
                { label: "Thu @Ultil.StringHelper.ConVertToMoneyFormatInt(ca.Income.ToString()) đ", data: '@ca.Income' },
                { label: "Chi @Ultil.StringHelper.ConVertToMoneyFormatInt(ca.Pay.ToString()) đ", data: '@ca.Pay' }
            ];
            $(document).ready(function () {
                setUpChar("#placeholder", data1);
            });
            function setUpChar(plateHole, data) {
                var placeholder = $(plateHole);
                placeholder.unbind();
                $("#title").text("Label Radius");
                $("#description").text("Slightly more transparent label backgrounds and adjusted the radius values to place them within the pie.");
                $.plot(placeholder, data1, {
                    series: {
                        pie: {
                            show: true,
                            radius: 1,
                            label: {
                                show: true,
                                radius: 2 / 3,
                                formatter: labelFormatter,
                                threshold: 0.1
                            }
                        }
                    },
                    legend: {
                        show: false
                    }
                });

            }
            function labelFormatter(label, series) {
                return "<div style='font-size:8pt; text-align:center; padding:2px; color:white;'>" + label + "<br/>" + Math.round(series.percent) + "%</div>";
            }
        </script>
        <script src="~/assets/plugins/amcharts/amcharts.js"></script>
        <script src="~/assets/plugins/amcharts/pie.js"></script>
        <script type="text/javascript" src="~/assets/plugins/amcharts/serial.js"></script>
        <script src="~/assets/plugins/amcharts/themes/light.js"></script>

        <div class="col-md-3 col-sm-3">
            <div class="portlet" style="box-shadow: none;">
                <div class="portlet-title">
                    <div class="caption"><i class="fa fa-bar-chart-o"></i>Tháng này (Đã đối soát)</div>
                </div>
                <div class="portlet-body" id="placeholder" style="height: 200px;"></div>
            </div>
        </div>
    }
    @if (ViewData["cashOfYear"] != null)
    {
        decimal[] t = (decimal[])ViewData["cashOfYear"];
        if (t.Length == 24)
        {
            <div class="col-md-9 col-sm-9">
                <div class="portlet" style="box-shadow: none;">
                    <div class="portlet-title">
                        <div class="caption"><i class="fa fa-bar-chart-o"></i>Năm nay</div>
                    </div>
                    <div class="portlet-body" id="placeholder2" style="height: 200px;"></div>
                </div>
            </div>
            <script type="text/javascript">
            $(function () {
                var data2 = [{
                    label: "Thu",
                    data: [[1,100], [2,55], [3,@t[2]], [4,@t[3]], [5,@t[4]], [6,@t[5]], [7,@t[6]], [8,@t[7]], [9,@t[8]], [10,@t[9]], [11,@t[10]], [12,@t[11]]]
                }, {
                    label: "Chi",
                    data: [[1,@t[12]], [2,@t[13]], [3,@t[14]], [4,@t[15]], [5,@t[6]], [6,@t[17]], [7,@t[18]], [8,@t[19]], [9,@t[20]], [10,@t[21]], [11,@t[22]], [12,@t[23]]]
                }, {
                    label: "Doanh thu",
                    data: [[1, @(t[0] - t[12])], [2,@(t[1] - t[13])], [3,@(t[2] - t[14])], [4, @(t[3] - t[15])], [5, @(t[4] - t[16])], [6, @(t[5] - t[17])], [7, @(t[6] - t[18])], [8, @(t[7] - t[19])], [9, @(t[8] - t[20])], [10,  @(t[9] - t[21])], [11,@(t[10] - t[22])], [12,@(t[11] - t[23])]]
                }];

                 var options2 = {
                     series: {
                         lines: {
                             show: true
                         },
                         points: {
                             show: true
                         }
                     },
                     legend: {
                         noColumns: 1
                     },
                     grid: {
                         hoverable: true,
                         clickable: true
                     },
                     xaxis: {
                         tickDecimals: 0
                     },
                     yaxis: {
                     },
                     selection: {
                         mode: "x"
                     }
                 };
                 var placeholder2 = $("#placeholder2");
                 var plot = $.plot(placeholder2, data2, options2);

             });
            $("#placeholder2").bind("plothover", function (event, pos, item) {
                if (item) {
                    if (previousPoint != item.dataIndex) {

                        previousPoint = item.dataIndex;
                        $("#tooltip").remove();
                        var x = item.datapoint[0].toFixed(2),
                        y = item.datapoint[1].toFixed(2);
                        showTooltip(item.pageX, item.pageY,
                            item.series.label + " của tháng " + x + " = " + y);
                    }
                }
            });
            </script>
        }

    }



</div>
@if (ViewData["cashOfMonth"] != null)
{<div class="col-md-12 col-sm-12">
        <div class="portlet" style="box-shadow: none;">
            <div class="portlet-title"><div class="caption"><i class="fa fa-bar-chart-o"></i>Doanh thu tháng này</div></div>
            <div class="portlet-body" id="placeholder3" style="height: 300px;"></div>
        </div>
    </div>
    decimal[] t2 = (decimal[])ViewData["cashOfMonth"];
    <script type="text/javascript">
             $(function () {
                 var data3 = [{
                     label: "Thu",
                     data: [[1,@t2[0]], [2,@t2[1]], [3,@t2[2]], [4,@t2[3]], [5,@t2[4]], [6,@t2[5]], [7,@t2[6]], [8,@t2[7]], [9,@t2[8]], [10,@t2[9]], [11,@t2[10]], [12,@t2[11]], [13,@t2[12]], [14,@t2[13]], [15,@t2[14]], [16,@t2[15]], [17,@t2[16]], [18,@t2[17]], [19,@t2[18]], [20,@t2[19]], [21,@t2[20]], [22,@t2[21]], [23,@t2[22]], [24,@t2[23]], [25,@t2[24]], [26,@t2[25]], [27,@t2[26]], [28,@t2[27]], [29,@t2[28]], [30,@t2[29]], [31,@t2[30]]]
                }, {
                    label: "Chi",
                    data: [[1,@t2[31]], [2,@t2[32]], [3,@t2[33]], [4,@t2[34]], [5,@t2[35]], [6,@t2[36]], [7,@t2[37]], [8,@t2[38]], [9,@t2[39]], [10,@t2[40]], [11,@t2[41]], [12,@t2[42]], [13,@t2[43]], [14,@t2[44]], [15,@t2[45]], [16,@t2[46]], [17,@t2[47]], [18,@t2[48]], [19,@t2[49]], [20,@t2[50]], [21,@t2[51]], [22,@t2[52]], [23,@t2[53]], [24,@t2[54]], [25,@t2[55]], [26,@t2[56]], [27,@t2[57]], [28,@t2[58]], [29,@t2[59]], [30,@t2[60]], [31,@t2[61]]]
                }, {
                    label: "Doanh thu",
                    data: [[1, @(t2[0] - t2[31])], [2,@(t2[1] - t2[32])], [3,@(t2[2] - t2[33])], [4, @(t2[3] - t2[34])], [5, @(t2[4] - t2[35])], [6, @(t2[5] - t2[36])], [7, @(t2[6] - t2[37])], [8, @(t2[7] - t2[38])], [9, @(t2[8] - t2[39])], [10,  @(t2[9] - t2[40])], [11,@(t2[10] - t2[41])], [12,@(t2[11] - t2[42])], [13,@(t2[12] - t2[43])], [14,@(t2[13] - t2[44])], [15,@(t2[14] - t2[45])], [16,@(t2[15] - t2[46])], [17,@(t2[16] - t2[47])], [18,@(t2[17] - t2[48])], [19,@(t2[18] - t2[49])], [20,@(t2[19] - t2[50])], [21,@(t2[20] - t2[51])], [22,@(t2[21] - t2[52])], [23,@(t2[22] - t2[53])], [24,@(t2[23] - t2[54])], [25,@(t2[24] - t2[55])], [26,@(t2[25] - t2[56])], [27,@(t2[26] - t2[57])], [28,@(t2[27] - t2[58])], [29,@(t2[28] - t2[59])], [30,@(t2[29] - t2[60])], [31,@(t2[30] - t2[61])]]
                }];
                 var options = {
                     series: {
                         lines: {
                             show: true
                         },
                         points: {
                             show: true
                         }
                     },
                     legend: {
                         noColumns: 1
                     },
                     xaxis: {
                         tickDecimals: 0
                     },
                     yaxis: {


                     },
                         grid: {
                     hoverable: true,
                     clickable: true
             },
                     selection: {
                         mode: "x"
                     }
                 };
                 var placeholder = $("#placeholder3");
                 var plot = $.plot(placeholder, data3, options);
                 $("#placeholder3").bind("plothover", function (event, pos, item) {
                         if (item) {
                             if (previousPoint != item.dataIndex) {
                                 previousPoint = item.dataIndex;
                                 $("#tooltip").remove();
                                 var x = item.datapoint[0].toFixed(2),
                                 y = item.datapoint[1].toFixed(2);
                                 showTooltip(item.pageX, item.pageY,
                                     item.series.label + " của tháng " + x + " = " + y);
                             }
                     }
                 });

             });


             var previousPoint = null;
    </script>

}
<div class="portlet" style="box-shadow: none;">
    <div class="portlet-title">
        <div class="caption"><i class="fa fa-bar-chart-o"></i>Top sản phẩm (<a href='javascript:getRevenueOfProduct("char","month");'>Tháng này</a>) (<a href='javascript:getRevenueOfProduct("char","year");'>Năm nay</a>) <select id="orderBy"><option value="0">Theo doanh thu</option><option value="1">Theo doanh số</option></select></div>
    </div>
    <div id="getRevenueOfProductChar" class="col-md-12 col-sm-12" style="height:550px">
    </div>


</div>
<script>
    $(document).ready(function () {
     
        getRevenueOfProduct();
    })
    function showTooltip(x, y, contents) {
        $("<div id='tooltip'>" + contents + "</div>").css({
            position: "absolute",
            display: "none",
            top: y + 5,
            left: x + 5,
            border: "1px solid #fdd",
            padding: "2px",
            "background-color": "#fee",
            opacity: 0.80
        }).appendTo("body").fadeIn(200);
    }

    var previousPoint = null;


  
</script>
