@{
    ViewBag.Title = "Thông tin chung";
    Layout = "~/Views/Shared/_Layout2.cshtml";
    Models.Webconfig wc = (Models.Webconfig)ViewData["webconfig"];
}
@section head{

    @*<link href="/assets/ckeditor/contents.css" rel="stylesheet" />*@
    <link href="//cdn.anpero.com/cdn/assets/global/plugins/codemirror/lib/codemirror.css" rel="stylesheet" type="text/css" />
    <link href="//cdn.anpero.com/cdn/assets/global/plugins/codemirror/theme/neat.css" rel="stylesheet" type="text/css" />
    <link href="//cdn.anpero.com/cdn/assets/global/plugins/codemirror/theme/ambiance.css" rel="stylesheet" type="text/css" />
    <link href="//cdn.anpero.com/cdn/assets/global/plugins/codemirror/theme/material.css" rel="stylesheet" type="text/css" />
    <link href="//cdn.anpero.com/cdn/assets/global/plugins/codemirror/theme/neo.css" rel="stylesheet" type="text/css" />
}
<div class="page-head">
    <!-- BEGIN PAGE TITLE -->
    <div class="page-title">
        <h1>
            Java Script và giao diện chân trang
            <small>Mã script Google analytics, plugin Chat vv...</small>
        </h1>
    </div>
    <!-- END PAGE TITLE -->
</div>
<div class="col-md-12 ">
    <div class="portlet light bordered">
        <div class="portlet-title">
            <div class="caption font-red-sunglo">
                <i class="icon-settings font-red-sunglo"></i>
                <span class="caption-subject bold uppercase"> Mã Java scrip cho tất cả các trang</span>
            </div>
            <div class="actions"><button type="button" class="btn blue btnConfig">Cập nhật</button></div>
        </div>
        <div class="portlet-body form">
            <form role="form">
                <div class="form-body">
                    <div class="form-group">
                       <textarea class="form-control" rows="8" id="txtscript">@wc.PageScript</textarea>
                    </div>
                    @*<div class="form-group form-md-line-input">
                        <label for="form_control_1">Html Chân trang</label>

                        <textarea name="username" class="ckeditor form-control" id="editor1">@wc.Footer</textarea>

                    </div>*@


                </div>      
                <div class="form-actions noborder">
                    <button type="button" class="btn blue btnConfig" >Cập nhật</button>
                </div>
            </form>
        </div>
    </div>
</div>

@*<script src="/assets/ckeditor/ckeditor.js"></script>*@

<script src="~/Scripts/webconfig/webconfig.js"></script>
<script src="//cdn.anpero.com/cdn/assets/global/plugins/codemirror/lib/codemirror.js" type="text/javascript"></script>
<script src="//cdn.anpero.com/cdn/assets/global/plugins/codemirror/mode/javascript/javascript.js" type="text/javascript"></script>
<script>
    var ComponentsCodeEditors = function () {
        var setJavascriptEditor = function () {
            var e = document.getElementById("txtscript");
            var editor = CodeMirror.fromTextArea(e, { lineNumbers: !0, matchBrackets: !0, styleActiveLine: !0, theme: "ambiance", mode: "javascript" });
            editor.setSize("100%", 1000)
            return editor;
        }
        return {
            init: function () {
                return setJavascriptEditor()
            }
        }
    }();
    $(document).ready(function () {
        var editor = ComponentsCodeEditors.init();
        $(".btnConfig").click(function () {           
            config.updateJavascript(editor.getValue());
        });
    });
</script>